(function(){var e={6700:function(e,t,s){var a={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":941,"./en-il.js":941,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":8227,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":8227,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function i(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=6700},1201:function(e,t,s){"use strict";var a=s(144),i=s(998),r=s(8323),o=function(){var e=this,t=e._self._c;return t(i.Z,[t("NavBar"),t(r.Z,{staticClass:"ma-4"},[t("router-view")],1),t("FooTer")],1)},l=[],n=s(9582),u=s(4886),d=s(8271),c=function(){var e=this,t=e._self._c;return t(d.Z,{attrs:{dark:"",padless:"",app:"",inset:""}},[t(n.Z,{staticClass:"flex",attrs:{flat:"",title:"",color:"grey lighten-4",elevation:10}},[t(u.ZB,{staticClass:"py-2 black--text text-center"},[e._v(" "+e._s((new Date).getFullYear())+" - "),t("strong",[e._v("WDA Livraria")])])],1)],1)},h=[],m=s(1001),p={},g=(0,m.Z)(p,c,h,!1,null,null,null),f=g.exports,v=s(6232),b=s(5550),y=s(1267),k=s(4324),_=s(5495),x=s(3201),j=s(5808),C=s(4525),Z=s(5187),P=s(5200),B=s(7233),w=s(3687),I=s(7953),D=function(){var e=this,t=e._self._c;return t("nav",[t(v.Z,{staticClass:"custom-color",attrs:{color:"grey lighten-4",dark:"",app:""}},[t(b.Z,{attrs:{color:"black"},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),t(I.qW,{staticClass:"text-uppercase"},[t(k.Z,{staticClass:"mx-2 mb-1",attrs:{color:"black"}},[e._v("mdi-book-open-page-variant")]),t("span",{staticClass:"font-weight-light"},[e._v("WDA")]),t("span",[e._v("Livraria")])],1),t(w.Z)],1),t(B.Z,{staticClass:"grey darken-4",attrs:{dark:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(x.Z,{attrs:{column:"","align-center":""}},[t(y.Z,{staticClass:"mt-5"},[t(_.Z,{staticClass:"mt-4",attrs:{src:"/altis_logo.png",width:"200"}})],1)],1),t(j.Z,{attrs:{flat:""}},e._l(e.links,(function(s){return t(C.Z,{key:s.text,attrs:{router:"",to:s.route,"active-class":"border"}},[t(Z.Z,[t(k.Z,[e._v(e._s(s.icon))])],1),t(P.km,[t(P.V9,[e._v(e._s(s.text))])],1)],1)})),1)],1)],1)},z=[],S={data:()=>({drawer:!0,links:[{icon:"dashboard",text:"Dashboard",route:"/"},{icon:"person",text:"Usuários",route:"/Usuarios"},{icon:"book",text:"Livros",route:"/Livros"},{icon:"domain",text:"Editoras",route:"/Editoras"},{icon:"edit",text:"Alugueis",route:"/Alugueis"}]})},A=S,E=(0,m.Z)(A,D,z,!1,null,"465ffb08",null),O=E.exports,T={name:"App",components:{NavBar:O,FooTer:f}},q=T,L=(0,m.Z)(q,o,l,!1,null,null,null),F=L.exports,U=s(8345),$=s(6190),N=s(266),V=s(9256),R=s(9223),M=s(1713),W=s(6313),Q=function(){var e=this,t=e._self._c;return t(i.Z,[t(R.Z,{staticClass:"mt-1",attrs:{color:"white",dark:""}}),t(V.Z,{staticClass:"father"},[t(M.Z,[t(N.Z,{attrs:{cols:"12",sm:"12"}},[t(W.Z,{staticClass:"mt-n5",attrs:{flat:"",color:"rgba(0,0,0,0)"}},[t(I.qW,[e._v("Dashboard")])],1),t(M.Z,{staticClass:"px-5 mt-n6"},e._l(e.lists,(function(s){return t(N.Z,{key:s.title,staticClass:"centro",attrs:{cols:"12",sm:"3"}},[t(n.Z,{staticClass:"rounded-circle border circulo",attrs:{align:"center",color:"#f9faf",flat:""}},[t(k.Z,{attrs:{size:"50",color:"blue"}},[e._v(e._s(s.icon))]),t(u.ZB,{staticClass:"grey--text text-lg-h6"},[e._v(e._s(s.title))]),t($.Z,{staticClass:"white--text btn",attrs:{absolute:"",color:"blue darken-3",fab:"",left:"",top:""},on:{click:function(t){return e.navigateToRoute(s.route)}}},[e._v(" "+e._s(s.count)+" ")])],1)],1)})),1),t(M.Z,{staticClass:"mt-n5"},[t(n.Z,{staticClass:"mt-7 card",staticStyle:{width:"97%","margin-left":"1.4%"},attrs:{height:"160"}},[t(u.EB,{staticClass:"centro"},[t(k.Z,[e._v("mdi-book")]),e._v(" Último livro alugado: ")],1),t("v-card-content",[t("div",{staticClass:"centro mb-3"},[t(k.Z,{staticClass:"mr-2"},[e._v("mdi-book-open-variant")]),t("span",{staticClass:"align-middle"},[e._v(" Livro: "+e._s(e.ultimoLivroAlugado.livro_id.nome)+" ")])],1),t("div",{staticClass:"centro"},[t(k.Z,{staticClass:"mr-2"},[e._v("mdi-account")]),t("span",{staticClass:"align-middle"},[e._v(" Usuario: "+e._s(e.ultimoLivroAlugado.usuario_id.nome)+" ")])],1)])],1),t(N.Z,{attrs:{cols:"12",sm:"6"}},[t("div",{staticClass:"pt-5"},[t("LineChart")],1)]),t(N.Z,{attrs:{cols:"12",sm:"6"}},[t("div",{staticClass:"mt-7"},[t("Table")],1)])],1)],1)],1)],1)],1)},Y=[],G=(s(7658),s(9449)),H=function(){var e=this,t=e._self._c;return t(y.Z,[t("div",{staticClass:"title text-center"},[e._v("Usuários com mais alugueis")]),t("div",{staticClass:"table_container"},[t(G.Z,{scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Usuário")]),t("th",{staticClass:"text-center"},[e._v("Total de Livros Alugados")])])]),t("tbody",e._l(e.limitedUserBookCounts,(function(s,a){return t("tr",{key:a},[t("td",[e._v(e._s(s[0]))]),t("td",{staticClass:"text-center"},[e._v(e._s(s[1]))])])})),0)]},proxy:!0}])})],1)])},J=[],K=s(6154);const X=K.Z.create({baseURL:"http://localhost:5081/api/"});var ee={list:()=>X.get("alugueis"),save:e=>X.post("aluguel",e),update:e=>X.put("aluguel",e),delete:e=>X.delete("aluguel",{data:e})},te={name:"BooksRentedByUserTable",data(){return{userBookCounts:[],minBooksAlugados:10,maxDisplayedUsers:7}},mounted(){this.fetchUserBookCounts()},computed:{filteredUserBookCounts(){return this.userBookCounts.filter((e=>e[1]>=this.minBooksAlugados))},limitedUserBookCounts(){return this.filteredUserBookCounts.slice(0,this.maxDisplayedUsers)}},methods:{fetchUserBookCounts(){try{ee.list().then((e=>{const t={};e.data.forEach((e=>{const s=e.usuario_id.nome;t[s]?t[s]++:t[s]=1})),this.userBookCounts=Object.entries(t),this.userBookCounts.sort(((e,t)=>t[1]-e[1]))}))}catch(e){console.error("Erro ao buscar dados:",e)}}}},se=te,ae=(0,m.Z)(se,H,J,!1,null,"0b125b9b",null),ie=ae.exports,re=function(){var e=this,t=e._self._c;return t(y.Z,[t("div",{staticClass:"flexbox"},[t("div",{staticClass:"chart_container"},[t("div",{staticClass:"title text-center"},[e._v("Livros mais alugados")]),t("canvas",{ref:"myChart",attrs:{id:"myChart"}})])])])},oe=[],le=s(7757),ne=s.n(le),ue={data:()=>({alugueis:[],maisalugados:[]}),mounted(){this.list()},methods:{list(){ee.list().then((e=>{this.alugueis=e.data,this.CalcMaisAlug()})).catch((e=>{console.error("Erro na busca de aluguéis",e)}))},CalcMaisAlug(){const e={};this.alugueis.forEach((t=>{const s=t.livro_id.nome;e[s]?e[s]++:e[s]=1})),this.maisalugados=Object.keys(e).sort(((t,s)=>e[s]-e[t])).map((t=>({livronome:t,quantidade:e[t]})))},upCharts(){const e=this.$refs.myChart.getContext("2d");new(ne())(e,{type:"bar",data:{labels:this.maisalugados.slice(0,4).map((e=>e.livronome)),datasets:[{label:"Quantidade Alugada",data:this.maisalugados.slice(0,4).map((e=>e.quantidade)),backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:0}]},options:{legend:{display:!1},scales:{x:{ticks:{callback:function(e){return e.split("\n")},autoSkip:!1}},y:{beginAtZero:!0}},maintainAspectRatio:!1,aspectRatio:1}})}},watch:{alugueis:{handler(){this.upCharts()},deep:!0}}},de=ue,ce=(0,m.Z)(de,re,oe,!1,null,"13b9ff84",null),he=ce.exports,me={list:e=>X.get("book/paged",{params:{Page:e.Page,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,Desc:e.Desc,Search:e.Search}}),save:e=>X.post("book",e),update:e=>X.put(`book/${e.id}`,e),delete:e=>X.delete(`book/${e.id}`,e)},pe={list:e=>X.get("user/paged",{params:{Page:e.Page,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,Desc:e.Desc,Search:e.Search}}),save:e=>X.post("user",e),update:e=>X.put(`user/${e.id}`,e),delete:e=>X.delete(`user/${e.id}`,e)},ge={list:e=>X.get("publisher/paged",{params:{Page:e.Page,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,Desc:e.Desc,Search:e.Search}}),select:()=>X.get("publisher/getSelect"),save:e=>X.post("publisher",e),update:e=>X.put(`publisher/${e.id}`,e),delete:e=>X.delete(`publisher/${e.id}`,e)},fe={name:"DashBoard",data(){return{usuarioComMaisAlugueis:null,usuarios:[],livros:[],alugueis:[],editoras:[],ultimoLivroAlugado:null,lists:[{icon:"mdi-account",title:"Usuários",count:0,route:"userview"},{icon:"mdi-book-open-variant",title:"Livros",count:0,route:"bookview"},{icon:"mdi-domain",title:"Editoras",count:0,route:"pubview"},{icon:"mdi-file-document",title:"Alugueis",count:0,route:"rentalview"}]}},components:{LineChart:he,Table:ie},methods:{updateCounts(){this.list(),this.Booklist(),this.Userlist(),this.Publist()},list(){ee.list().then((e=>{const t=e.data.sort(((e,t)=>e.id-t.id));this.alugueis=t,this.ultimoLivroAlugado=t[t.length-1],this.lists.find((e=>"Alugueis"===e.title)).count=this.alugueis.length}))},Booklist(){me.list().then((e=>{this.livros=e.data,this.lists.find((e=>"Livros"===e.title)).count=this.livros.length}))},Userlist(){pe.list().then((e=>{this.usuarios=e.data,this.lists.find((e=>"Usuários"===e.title)).count=this.usuarios.length}))},Publist(){ge.list().then((e=>{this.editoras=e.data,this.lists.find((e=>"Editoras"===e.title)).count=this.editoras.length}))},navigateToRoute(e){this.$router.push({name:e})}},mounted(){this.updateCounts()}},ve=fe,be=(0,m.Z)(ve,Q,Y,!1,null,"9d3b7832",null),ye=be.exports,ke=s(5227),_e=s(4061),xe=s(5125),je=s(5375),Ce=s(7808),Ze=function(){var e=this,t=e._self._c;return t(n.Z,[t(u.EB,[t(Ce.Z,{attrs:{"append-icon":"mdi-magnify",label:"Pesquisar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(ke.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.books,search:e.search,loading:e.loadingTable,"loading-text":"Carregando","server-items-length":e.total,"items-per-page":e.pageSize,page:e.page,"footer-props":{itemsPerPageOptions:[5,10,25,this.total],itemsPerPageText:"Linhas por página"}},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"top",fn:function(){return[t(W.Z,{attrs:{flat:""}},[t(I.qW,[t("h2",[e._v("Livros")])]),t(w.Z),t(_e.Z,{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t($.Z,e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",a,!1),s),[e._v(" Adicionar Livro ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(xe.Z,{ref:"bookForm",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[t(n.Z,[t(u.EB,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),t(u.ZB,[t(V.Z,[t(Ce.Z,{attrs:{label:"Nome",rules:e.rules,"hide-details":"auto",required:"","prepend-icon":"mdi-book"},model:{value:e.book.name,callback:function(t){e.$set(e.book,"name",t)},expression:"book.name"}}),t(Ce.Z,{attrs:{label:"Autor",rules:e.rules,"hide-details":"auto",required:"","prepend-icon":"mdi-city"},model:{value:e.book.author,callback:function(t){e.$set(e.book,"author",t)},expression:"book.author"}}),t(Ce.Z,{staticClass:"mt-4",attrs:{rules:e.rulesNumber,label:"Ano de lançamento","prepend-icon":"mdi-calendar",counter:50,type:"number",required:"",max:9999,min:1e3},model:{value:e.book.release,callback:function(t){e.$set(e.book,"release",t)},expression:"book.release"}}),t(je.Z,{attrs:{items:e.publishersList,"item-text":"name","item-value":"id",label:"Editora do Livro","prepend-icon":"mdi-domain",rules:e.rulesNumber,required:""},model:{value:e.book.publisher,callback:function(t){e.$set(e.book,"publisher",t)},expression:"book.publisher"}}),t(Ce.Z,{attrs:{label:"Quantidade de livros","prepend-icon":"mdi mdi-book-plus-multiple-outline",counter:50,type:"number",rules:e.rulesNumber,required:""},model:{value:e.book.quantity,callback:function(t){e.$set(e.book,"quantity",t)},expression:"book.quantity"}})],1)],1),t(u.h7,[t(w.Z),t($.Z,{attrs:{text:"",color:"error"},on:{click:e.close}},[e._v(" Fechar ")]),t($.Z,{attrs:{text:"",color:"primary"},on:{click:e.addLivro}},[e._v(" Feito ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:s}){return[t($.Z,{attrs:{small:"",text:""},on:{click:function(t){return e.editItem(s)}}},[t(k.Z,{staticClass:"primary--text"},[e._v("mdi-pencil")])],1),t($.Z,{attrs:{text:"",small:""},on:{click:function(t){return e.deleteItem(s)}}},[t(k.Z,{staticClass:"error--text"},[e._v("mdi-delete")])],1)]}}])})],1)},Pe=[],Be=s(6455),we=s.n(Be),Ie={data(){return{publishersList:[],search:"",loadingTable:!0,formIsValid:!1,rules:[e=>!!e||"Campo Obrigatório",e=>e&&e.length>=3||"Mínimo 3 caracteres"],rulesNumber:[e=>!!e||"Campo Obrigatório"],dialog:!1,headers:[{text:"ID",value:"id"},{text:"Nome",value:"name"},{text:"Autor",value:"author"},{text:"Lançamento",value:"release"},{text:"Editora",value:"publisher.name"},{text:"Quantidade",value:"quantity"},{text:"Total Alugado",value:"rented"},{text:"Ações",value:"actions",sortable:!1}],book:{id:0,name:"",author:"",release:0,publisher:0,quantity:0,rented:0},books:[],errors:[],editedIndex:-1,editedItem:{id:"",name:"",author:"",publisher:{},release:0,quantity:0,rented:0},total:0,page:1,pageSize:5,orderByProperty:"id",desc:!1,defaultItem:{id:"",name:"",author:"",publisher:{},release:0,quantity:0,rented:0}}},mounted(){this.list(),this.listPublishers()},computed:{formTitle(){return-1===this.editedIndex?"Adicionar Livro":"Editar Livro"}},watch:{dialog(e){e||this.close()},search:function(){this.list()}},methods:{async listPublishers(){try{const e=await ge.select();this.publishersList=e.data.data}catch(e){console.error("Erro ao buscar editoras",e)}},checkFormValidity(){this.formIsValid=this.$refs.bookForm.validate()},handleOptionsUpdate(e){const t={id:"Id",name:"Name",author:"Author",release:"release",publisher:"publisher",quantity:"quantity",rented:"rented"};e.sortBy[0]||e.sortDesc[0]?(this.orderByProperty=t[e.sortBy[0]],this.desc=e.sortDesc[0]):(this.orderByProperty="Id",this.desc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.total=e.itemsPerPage,this.itemsPerPage=e.itemsPerPage,this.list()},async list(){try{const e=await me.list({Page:this.page,PageSize:this.pageSize,OrderByProperty:this.orderByProperty,Desc:this.desc,Search:this.search});this.books=e.data.data,this.total=e.data.totalRegisters}catch(e){console.error("Erro ao Listar: ",e),404==e.response.status&&(this.books=[],console.log(e.response.data.message))}finally{this.loadingTable=!1}},editItem(e){this.book.id=e.id,this.book.name=e.name,this.book.author=e.author,this.book.publisher=e.publisherId,this.book.release=e.release,this.book.quantity=e.quantity,this.editedIndex=this.books.indexOf(e),this.dialog=!0,this.checkFormValidity()},deleteItem(e){we().fire({icon:"warning",title:"Deseja excluir o livro?",text:"Essa ação não pode ser desfeita!",showCancelButton:!0,confirmButtonText:"Sim",cancelButtonText:"Não",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((t=>{t.isConfirmed&&me.delete(e).then((()=>{we().fire({icon:"success",title:"Livro excluído com sucesso!",showConfirmButton:!1,timer:2e3}),this.list()})).catch((e=>{console.error(e),we().fire({icon:"error",title:"Erro ao excluir livro",text:e.response.data.message,showConfirmButton:!1,timer:3e3})}))}))},close(){this.dialog=!1,this.book={id:"",name:"",author:"",publisher:0,release:0,quantity:0,rented:0},this.editedIndex=-1,this.checkFormValidity(),this.$refs.bookForm.reset()},save(){if(this.book.id){const e={id:this.book.id,name:this.book.name,author:this.book.author,publisherId:this.book.publisher,release:this.book.release,quantity:this.book.quantity};me.update(e).then((()=>{we().fire({icon:"success",title:"Livro atualizado com sucesso!",showConfirmButton:!1,timer:2e3}),this.list(),this.close(),this.$refs.bookForm.reset()})).catch((e=>{console.log(e.response.data.message),we().fire({icon:"error",title:"Erro ao atualizar livro",text:e.response.data.message,showConfirmButton:!1,timer:3e3})}))}else{const e={name:this.book.name,author:this.book.author,publisherId:this.book.publisher,release:this.book.release,quantity:this.book.quantity,rented:0};console.log(this.book.publisher),console.log(e),me.save(e).then((e=>{we().fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:2e3}),this.close(),this.list()})).catch((e=>{console.log(e.response.data.message),we().fire({icon:"error",title:"Erro ao cadastrar livro",text:e.response.data.message,showConfirmButton:!1,timer:3e3})}))}},addLivro(){this.checkFormValidity(),this.formIsValid&&this.save()}}},De=Ie,ze=(0,m.Z)(De,Ze,Pe,!1,null,"0cd3a48e",null),Se=ze.exports,Ae=s(4127),Ee=function(){var e=this,t=e._self._c;return t(n.Z,[t(u.EB,[t(Ce.Z,{attrs:{"append-icon":"mdi-magnify",label:"Pesquisar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(ke.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.filteredRentals,search:e.search,"items-per-page":e.page,"footer-props":{itemsPerPageOptions:[5,10,25,this.alugueis.length],itemsPerPageText:"Linhas por página"}},scopedSlots:e._u([{key:"top",fn:function(){return[t(W.Z,{attrs:{flat:""}},[t(I.qW,[t("h2",[e._v("Alugueis")])]),t(w.Z),t(_e.Z,{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t($.Z,e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",a,!1),s),[e._v(" Adicionar Aluguel ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(xe.Z,{ref:"AluguelForm",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[t(n.Z,[t(u.EB,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),t(u.ZB,[t(V.Z,[t(je.Z,{attrs:{label:"Nome do Livro",rules:e.rulesNumber,"hide-details":"auto",required:"",items:e.livros,"item-text":"nome","prepend-icon":"mdi-book"},model:{value:e.livro_id,callback:function(t){e.livro_id=t},expression:"livro_id"}}),t(je.Z,{attrs:{label:"Usuário",rules:e.rulesNumber,"hide-details":"auto",required:"",items:e.usuarios,"item-text":"nome","prepend-icon":"mdi-account-circle"},model:{value:e.usuario_id,callback:function(t){e.usuario_id=t},expression:"usuario_id"}}),t(M.Z,{staticClass:"my-3"},[t(N.Z,{attrs:{cols:"6"}},[t(Ce.Z,{attrs:{disabled:"",label:"Data do Aluguel","hide-details":"auto",type:"date"},model:{value:e.data_aluguel,callback:function(t){e.data_aluguel=t},expression:"data_aluguel"}})],1),t(N.Z,{attrs:{cols:"6"}},[t(Ce.Z,{attrs:{label:"Previsão de Devolução",rules:e.rulesNumber,"hide-details":"auto",required:"",type:"date"},model:{value:e.data_previsao,callback:function(t){e.data_previsao=t},expression:"data_previsao"}})],1)],1)],1)],1),t(u.h7,[t(w.Z),t($.Z,{attrs:{text:"",color:"error"},on:{click:e.close}},[e._v(" Fechar ")]),t($.Z,{attrs:{text:"",color:"primary"},on:{click:e.addAluguel}},[e._v(" Feito ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.status",fn:function({item:s}){return[t("td",[t(Ae.Z,{staticClass:"white--text",class:e.statusClass(s)},[e._v(e._s(s.status))])],1)]}},{key:"item.actions",fn:function({item:s}){return["Pendente"==s.status?t($.Z,{attrs:{text:"",small:""},on:{click:function(t){return e.devolItem(s)}}},[t(k.Z,{staticClass:"green--text"},[e._v("mdi-book")])],1):e._e(),"Pendente"==s.status?t($.Z,{attrs:{text:"",small:""},on:{click:function(t){return e.deleteItem(s)}}},[t(k.Z,{staticClass:"error--text"},[e._v("mdi-delete")])],1):e._e()]}}],null,!0)})],1)},Oe=[],Te={data(){return{search:"",pagination:{rowsPerPage:5},formIsValid:!1,rulesNumber:[e=>!!e||"Campo Obrigatório"],dialog:!1,headers:[{text:"ID",value:"id"},{text:"Livro",value:"livro_id"},{text:"Usuário",value:"usuario_id"},{text:"Data do Aluguel",value:"data_aluguel"},{text:"Previsão de Devolução",value:"data_previsao"},{text:"Data de Devolução",value:"data_devolucao"},{text:"Status",value:"status",align:"center",sortable:!1},{text:"Ações",value:"actions",sortable:!1}],alugueis:[],livros:[],usuarios:[],livro_id:"",usuario_id:"",data_aluguel:(new Date).toISOString().substr(0,10),data_previsao:"",data_devolucao:"",status:"",selectedAlugId:null,errors:[],editedIndex:-1}},mounted(){this.list()},computed:{formTitle(){return-1===this.editedIndex?"Adicionar Aluguel":"Editar Aluguel"},filteredRentals(){const e=this.search.toLowerCase();return this.alugueis.filter((t=>{for(const s in t){const a=t[s].toString().toLowerCase();if(a.includes(e))return!0}return!1}))}},watch:{dialog(e){e||this.close()}},methods:{resetValidation(){this.$refs.AluguelForm.resetValidation()},statusClass(e){return"Atrasado"==e.status?"red":"No Prazo"==e.status?"green":"yellow"},formatDate(e){const t=new Date(e),s=new Date(t.getTime()+6e4*t.getTimezoneOffset());return s.toLocaleDateString("pt-BR")},parseDate(e){if(!e)return null;const[t,s,a]=e.split("/");return`${a}-${s}-${t}`},checkFormValidity(){this.formIsValid=this.$refs.AluguelForm.validate()},async list(){try{const[e,t,s]=await Promise.all([me.list(),ee.list(),pe.list()]);this.livros=e.data.map((e=>({id:e.id,nome:e.nome}))),this.usuarios=s.data.map((e=>({id:e.id,nome:e.nome}))),this.alugueis=t.data.map((e=>{const t=e.data_devolucao,s=e.data_previsao;let a;return a=null!==t?t>s?"Atrasado":"No Prazo":"Pendente",{id:e.id,livro_id:e.livro_id.nome,usuario_id:e.usuario_id.nome,data_aluguel:this.formatDate(e.data_aluguel),data_previsao:this.formatDate(e.data_previsao),data_devolucao:e.data_devolucao?this.formatDate(e.data_devolucao):"Não devolvido",status:a}})),this.alugueis.sort(((e,t)=>"Pendente"===e.status&&"Pendente"!==t.status?-1:"Pendente"!==e.status&&"Pendente"===t.status?1:0))}catch(e){console.error("Erro ao buscar informações:",e)}},devolItem(e){we().fire({title:"Devolver livro?!",text:"Tem certeza que deseja fazer isso ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Confirmar",confirmButtonColor:"#1976d2",cancelButtonText:"Cancelar",cancelButtonColor:"#ff5252"}).then((t=>{t.isConfirmed&&this.devolver(e)}))},devolver(e){"Não devolvido"==e.data_devolucao?(this.selectedAlugId=e.id,this.livro_id=e.livro_id,this.usuario_id=e.usuario_id,this.data_aluguel_temp=e.data_aluguel,this.data_previsao=e.data_previsao,this.confirmDevol()):we().fire("O livro já foi devolvido!","","error")},confirmDevol(){const e=this.livros.find((e=>e.nome===this.livro_id)),t=this.usuarios.find((e=>e.nome===this.usuario_id)),s={id:this.selectedAlugId,livro_id:e?{...e}:this.livro_id,usuario_id:t?{...t}:this.usuario_id,data_aluguel:this.parseDate(this.data_aluguel_temp),data_previsao:this.parseDate(this.data_previsao),data_devolucao:(new Date).toISOString().substr(0,10),status:"No Prazo"};ee.update(s).then((()=>{this.alugueis=this.alugueis.map((e=>this.selectedALugId===s.id?s:e)),we().fire({icon:"success",title:"Devolução realizada com sucesso!",showConfirmButton:!1,timer:2e3}),this.list(),this.zerar(),this.resetValidation()}))},removerAluguel(e){this.alugueis=this.alugueis.filter((t=>t.id!==e))},deleteItem(e){we().fire({icon:"warning",title:"Deseja excluir o aluguel?",text:"Essa ação não pode ser desfeita!",showCancelButton:!0,confirmButtonText:"Sim",cancelButtonText:"Não",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((t=>{if(t.isConfirmed){const t=this.livros.find((t=>t.nome===e.livro_id)),s=this.usuarios.find((t=>t.nome===e.usuario_id)),a={id:e.id,livro_id:t,usuario_id:s,data_aluguel:this.parseDate(e.data_aluguel),data_previsao:this.parseDate(e.data_previsao),data_devolucao:"Não devolvido"!==e.data_devolucao?e.data_devolucao:null};ee.delete(a).then((()=>{we().fire({icon:"success",title:"Aluguel excluído com sucesso!",showConfirmButton:!1,timer:2e3}),this.removerAluguel(a.id),this.close(),this.list(),this.zerar(),this.resetValidation()})).catch((e=>{we().fire({icon:"error",title:"Erro ao excluir Aluguel",text:e.response.data.error,showConfirmButton:!1,timer:3e3})}))}}))},close(){this.dialog=!1,this.zerar()},isLivroDisponivel(e){return e.quantidade>0},save(){const e=this.livros.find((e=>e.nome===this.livro_id)),t=this.usuarios.find((e=>e.nome===this.usuario_id)),s={livro_id:e,usuario_id:t,data_aluguel:this.data_aluguel,data_previsao:this.data_previsao,status:"Pendente"};ee.save(s).then((e=>{this.alugueis.push({id:e.data.id,...s}),we().fire({icon:"success",title:"Aluguel cadastrado com sucesso!",showConfirmButton:!1,timer:2e3}),this.list(),this.close(),this.zerar(),this.resetValidation()}))},addAluguel(){this.checkFormValidity(),this.formIsValid&&this.save()},zerar(){this.livro_id="",this.usuario_id="",this.data_previsao="",this.data_aluguel=(new Date).toISOString().substr(0,10)}}},qe=Te,Le=(0,m.Z)(qe,Ee,Oe,!1,null,"29172cb6",null),Fe=Le.exports,Ue=function(){var e=this,t=e._self._c;return t(n.Z,[t(u.EB,[t(Ce.Z,{attrs:{"append-icon":"mdi-magnify",label:"Pesquisar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(ke.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,loading:e.loadingTable,"loading-text":"Carregando...","server-items-length":e.total,"items-per-page":e.pageSize,page:e.page,"footer-props":{itemsPerPageOptions:[5,10,25,this.total],itemsPerPageText:"Linhas por página"}},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"top",fn:function(){return[t(W.Z,{attrs:{flat:""}},[t(I.qW,[t("h2",[e._v("Usuários")])]),t(w.Z),t(_e.Z,{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t($.Z,e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",a,!1),s),[e._v(" Adicionar Usuário ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(xe.Z,{ref:"userForm",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[t(n.Z,[t(u.EB,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),t(u.ZB,[t(V.Z,[t(Ce.Z,{attrs:{label:"Nome",rules:e.rules,"hide-details":"auto",required:"","prepend-icon":"mdi-account"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),t(Ce.Z,{attrs:{label:"Cidade",rules:e.rules,"hide-details":"auto",required:"","prepend-icon":"mdi-city"},model:{value:e.user.city,callback:function(t){e.$set(e.user,"city",t)},expression:"user.city"}}),t(Ce.Z,{attrs:{label:"Email",rules:e.emailRules,"hide-details":"auto",required:"","prepend-icon":"mdi mdi-at"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),t(Ce.Z,{attrs:{label:"Endereço",rules:e.rules,"hide-details":"auto",required:"","prepend-icon":"mdi-home-city"},model:{value:e.user.address,callback:function(t){e.$set(e.user,"address",t)},expression:"user.address"}})],1)],1),t(u.h7,[t(w.Z),t($.Z,{attrs:{text:"",color:"error"},on:{click:e.close}},[e._v(" Fechar ")]),t($.Z,{attrs:{text:"",color:"primary"},on:{click:e.addUser}},[e._v(" Feito ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:s}){return[t($.Z,{attrs:{small:"",text:""},on:{click:function(t){return e.editItem(s)}}},[t(k.Z,{staticClass:"primary--text"},[e._v("mdi-account-edit")])],1),t($.Z,{attrs:{small:"",text:""},on:{click:function(t){return e.deleteItem(s)}}},[t(k.Z,{staticClass:"error--text"},[e._v("mdi-delete")])],1)]}},{key:"no-data",fn:function(){return[t("span",[e._v("Sem dados")])]},proxy:!0}])})],1)},$e=[],Ne={data(){return{search:"",pagination:{rowsPerPage:5},formIsValid:!1,loadingTable:!0,emailRules:[e=>!!e||"Campo Obrigatório",e=>/.+@.+\..+/.test(e)||"O email deve ser válido"],rules:[e=>!!e||"Campo Obrigatório",e=>e&&e.length>=3||"Mínimo 3 caracteres"],dialog:!1,headers:[{text:"ID",value:"id"},{text:"Nome",value:"name"},{text:"Cidade",value:"city"},{text:"Email",value:"email"},{text:"Endereço",value:"address"},{text:"Ações",value:"actions",sortable:!1}],user:{id:0,name:"",city:"",email:"",address:""},users:[],total:0,page:1,pageSize:5,orderByProperty:"id",desc:!1,errors:[],editedIndex:-1,editedItem:{name:"",city:"",email:"",address:""},defaultItem:{name:"",city:"",email:"",address:""}}},mounted(){this.list()},computed:{formTitle(){return-1===this.editedIndex?"Adicionar Usuário":"Editar Usuário"}},watch:{dialog(e){e||this.close()},search:function(){this.list()}},methods:{checkFormValidity(){this.formIsValid=this.$refs.userForm.validate()},handleOptionsUpdate(e){const t={id:"Id",name:"Name",city:"City",email:"Email",address:"Address"};e.sortBy[0]||e.sortDesc[0]?(this.orderByProperty=t[e.sortBy[0]],this.desc=e.sortDesc[0]):(this.orderByProperty="Id",this.desc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.total=e.itemsPerPage,this.itemsPerPage=e.itemsPerPage,this.list()},async list(){try{const e=await pe.list({Page:this.page,PageSize:this.pageSize,OrderByProperty:this.orderByProperty,Desc:this.desc,Search:this.search});this.users=e.data.data,this.total=e.data.totalRegisters}catch(e){console.error("Erro ao Listar :",e),404==e.response.status&&(this.users=[],console.log(e.response.data.message))}finally{this.loadingTable=!1}},editItem(e){this.user.id=e.id,this.user.name=e.name,this.user.city=e.city,this.user.email=e.email,this.user.address=e.address,this.editedIndex=this.users.indexOf(e),this.dialog=!0,this.checkFormValidity()},deleteItem(e){we().fire({icon:"warning",title:"Deseja excluir o usuário?",text:"Essa ação não pode ser desfeita!",showCancelButton:!0,confirmButtonText:"Sim",cancelButtonText:"Não",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((t=>{t.isConfirmed&&pe.delete(e).then((e=>{we().fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:2e3}),this.list()})).catch((e=>{console.log(e.response.data.message),we().fire({icon:"error",title:"Erro ao deletar usuário",text:e.response.data.message,showConfirmButton:!1,timer:3e3})}))}))},close(){this.dialog=!1,this.user.id="",this.user.name="",this.user.city="",this.user.email="",this.user.address="",this.editedIndex=-1,this.$refs.userForm.reset()},save(){this.user.id?pe.update(this.user).then((e=>{this.user={},we().fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:2e3}),this.list(),this.close(),this.$refs.userForm.reset()})).catch((e=>{console.log(e.response.data.message),we().fire({icon:"error",title:"Erro ao atualizar usuário",text:e.response.data.message,showConfirmButton:!1,timer:3e3})})):pe.save(this.user).then((e=>{we().fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:2e3}),this.close(),this.list(),this.$refs.userForm.reset()})).catch((e=>{console.log(e.response.data.message),we().fire({icon:"error",title:"Erro ao cadastrar usuário",text:e.response.data.message,showConfirmButton:!1,timer:3e3})}))},addUser(){this.checkFormValidity(),this.formIsValid&&this.save()}}},Ve=Ne,Re=(0,m.Z)(Ve,Ue,$e,!1,null,"9abecdbe",null),Me=Re.exports,We=function(){var e=this,t=e._self._c;return t(n.Z,[t(u.EB,[t(Ce.Z,{attrs:{"append-icon":"mdi-magnify",label:"Pesquisar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(ke.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.publishers,search:e.search,loading:e.loadingTable,"loading-text":"Carregando...","server-items-length":e.total,"items-per-page":e.pageSize,page:e.page,"footer-props":{itemsPerPageOptions:[5,10,25,this.total],itemsPerPageText:"Linhas por página"}},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"top",fn:function(){return[t(W.Z,{attrs:{flat:""}},[t(I.qW,[t("h2",[e._v("Editoras")])]),t(w.Z),t(_e.Z,{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t($.Z,e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",a,!1),s),[e._v(" Adicionar Editora ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(xe.Z,{ref:"publisherForm",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[t(n.Z,[t(u.EB,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),t(u.ZB,[t(V.Z,[t(Ce.Z,{attrs:{label:"Nome",rules:e.rules,"hide-details":"auto",required:"","prepend-icon":"mdi-domain"},model:{value:e.publisher.name,callback:function(t){e.$set(e.publisher,"name",t)},expression:"publisher.name"}}),t(Ce.Z,{attrs:{label:"Cidade",rules:e.rules,"hide-details":"auto",required:"","prepend-icon":"mdi-city"},model:{value:e.publisher.city,callback:function(t){e.$set(e.publisher,"city",t)},expression:"publisher.city"}})],1)],1),t(u.h7,[t(w.Z),t($.Z,{attrs:{text:"",color:"error"},on:{click:e.close}},[e._v(" Fechar ")]),t($.Z,{attrs:{text:"",color:"primary"},on:{click:e.addPublisher}},[e._v(" Feito ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:s}){return[t($.Z,{attrs:{text:"",small:""},on:{click:function(t){return e.editItem(s)}}},[t(k.Z,{staticClass:"primary--text"},[e._v("mdi-pencil")])],1),t($.Z,{attrs:{text:"",small:""},on:{click:function(t){return e.deleteItem(s)}}},[t(k.Z,{staticClass:"error--text"},[e._v("mdi-delete")])],1)]}},{key:"no-data",fn:function(){return[t("span",[e._v("Sem dados")])]},proxy:!0}])})],1)},Qe=[],Ye={data:()=>({search:"",formIsValid:!1,loadingTable:!0,rules:[e=>!!e||"Campo Obrigatório",e=>e&&e.length>=3||"Minimo 3 caracteres"],dialog:!1,headers:[{text:"ID",value:"id"},{text:"Nome",value:"name"},{text:"Cidade",value:"city"},{text:"Ações",value:"actions",sortable:!1}],publisher:{id:0,name:"",city:""},publishers:[],total:0,page:1,pageSize:5,orderByProperty:"id",desc:!1,errors:[],editedIndex:-1,editedItem:{name:"",city:""},defaultItem:{name:"",city:""}}),mounted(){this.list()},computed:{formTitle(){return-1===this.editedIndex?"Adicionar Editora":"Editar Editora"}},watch:{dialog(e){e||this.close()},search:function(){this.list()}},methods:{checkFormValidity(){this.formIsValid=this.$refs.publisherForm.validate()},handleOptionsUpdate(e){const t={id:"Id",name:"Name",city:"City"};e.sortBy[0]||e.sortDesc[0]?(this.orderByProperty=t[e.sortBy[0]],this.desc=e.sortDesc[0]):(this.orderByProperty="Id",this.desc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.total=e.itemsPerPage,this.itemsPerPage=e.itemsPerPage,this.list()},async list(){try{const e=await ge.list({Page:this.page,PageSize:this.pageSize,OrderByProperty:this.orderByProperty,Desc:this.desc,Search:this.search});this.publishers=e.data.data,this.total=e.data.totalRegisters}catch(e){console.error("Erro ao Listar :",e),404==e.response.status&&(this.publishers=[],console.log(e.response.data.message))}finally{this.loadingTable=!1}},editItem(e){this.publisher.id=e.id,this.publisher.name=e.name,this.publisher.city=e.city,this.editedIndex=this.publishers.indexOf(e),this.dialog=!0,this.checkFormValidity()},deleteItem(e){we().fire({icon:"warning",title:"Deseja excluir a editora?",text:"Essa ação não pode ser Desfeita!",showCancelButton:!0,confirmButtonText:"Sim",cancelButtonText:"Não",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((t=>{t.isConfirmed&&ge.delete(e).then((e=>{we().fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:2e3}),this.list()})).catch((e=>{console.log(e.response.data.message),we().fire({icon:"error",title:"Erro ao excluir editora",text:e.response.data.message,showConfirmButton:!1,timer:3e3})}))}))},close(){this.dialog=!1,this.publisher.id="",this.publisher.name="",this.publisher.city="",this.editedIndex=-1,this.$refs.publisherForm.reset()},save(){this.publisher.id?ge.update(this.publisher).then((e=>{this.publisher={},we().fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:2e3}),this.list(),this.close(),this.$refs.publisherForm.reset()})).catch((e=>{console.log(e.response.data.message),we().fire({icon:"error",title:"Erro ao atualizar editora",text:e.response.data.message,showConfirmButton:!1,timer:3e3})})):ge.save(this.publisher).then((e=>{we().fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:2e3}),this.close(),this.list(),this.$refs.publisherForm.reset()})).catch((e=>{we().fire({icon:"error",title:"Erro ao cadastrar editora",text:e.response.data.message,showConfirmButton:!1,timer:3e3})}))},addPublisher(){this.checkFormValidity(),this.formIsValid&&this.save()}}},Ge=Ye,He=(0,m.Z)(Ge,We,Qe,!1,null,"0dceecd8",null),Je=He.exports;a.ZP.use(U.ZP);const Ke=[{path:"/",name:"dashboard",component:ye},{path:"/Usuarios",name:"userview",component:Me},{path:"/Livros",name:"bookview",component:Se},{path:"/Alugueis",name:"rentalview",component:Fe},{path:"/Editoras",name:"pubview",component:Je}],Xe=new U.ZP({mode:"history",base:"/",routes:Ke});var et=Xe,tt=s(1705);a.ZP.use(tt.Z);var st=new tt.Z({icons:{iconfont:"md"}});a.ZP.config.productionTip=!1,new a.ZP({router:et,vuetify:st,render:e=>e(F)}).$mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,r){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],r=e[d][2];for(var l=!0,n=0;n<a.length;n++)(!1&r||o>=r)&&Object.keys(s.O).every((function(e){return s.O[e](a[n])}))?a.splice(n--,1):(l=!1,r<o&&(o=r));if(l){e.splice(d--,1);var u=i();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,i,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,r,o=a[0],l=a[1],n=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);if(n)var d=n(s)}for(t&&t(a);u<o.length;u++)r=o[u],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},a=self["webpackChunklocadora"]=self["webpackChunklocadora"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(1201)}));a=s.O(a)})();
//# sourceMappingURL=app.b5d3f795.js.map